<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>自分の顔をちょっと良くしてみよう</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.15.3/dist/tf.min.js"></script>
    <!-- https://github.com/auduno/clmtrackr -->
    <!-- minifyされたスクリプトはエラーになる -->
    <script src="clmtrackr.js"></script>
    <!-- https://github.com/blueimp/JavaScript-Load-Image -->
    <script src="load-image.all.min.js"></script>
    <script src="index.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="section">
        <h4>
          自分の顔をちょっと良くしてみよう
        </h4>
        <p>
          「人が最も美しいと感じる顔は、平均的な顔である」という一説があります。
          また、Variational Autoencoder (VAE)の潜在変数は入力画像の特徴を抽出したものです。
          あなたの顔をVAEに入力して、潜在変数を平均値に近づけ、この説を検証してみましょう。
        </p>
        <ul class="browser-default">
          <li>全ての処理をブラウザ内で行うので、入力した画像がネットワークにアップロードされることはありません</li>
          <li>実行の際に、約36 MBのモデルをダウンロードします</li>
        </ul>
      </div>
      <div class="section">
        <button id="buttonCamera" class="btn-large waves-effect waves-light">
          <i class="material-icons left">camera_alt</i>
          カメラで撮影
        </button>
        <button id="buttonFile" class="btn-large waves-effect waves-light">
          <i class="material-icons left">folder</i>
          写真を選択
        </button>
        <button id="buttonSample" class="btn-large waves-effect waves-light">
          <i class="material-icons left">photo</i>
          サンプル写真で試す
        </button>
        <input id="inputFile" type="file" style="display:none">
      </div>
      <div class="section">
        <h5>顔認識</h5>
        <div style="position: relative">
          <canvas id="detectionImage"></canvas>
          <video id="detectionVideo" playsinline></video>
          <canvas id="detectionOverlay" style="position: absolute; top: 0px; left: 0px"></canvas>
        </div>
        <div>
          <a id="sampleSource"></a>
        </div>
        <div>
          <button id="detectionOK" class="btn waves-effect waves-light">
            <i class="material-icons left">check</i>
            OK
          </button>
          <button id="detectionCancel" class="btn waves-effect waves-light" disabled><!-- TODO -->
            <i class="material-icons left">cancel</i>
            キャンセル
          </button>
        </div>
      </div>
      <div class="section">
        <h5>平均化</h5>
        <div>
          <canvas id="averageCanvas" width="320" height="320"></canvas>
        </div>
        <div class="range-field" style="width: 320px">
          <input id="selector" type="range" min="0" max="11">
        </div>
      </div>
      <div class="section">
        <h5>ログ</h5>
        <div id="log">
        </div>
      </div>
    </div>

    <footer class="page-footer">
      <div class="footer-copyright">
        <div class="container">
          Deep Learning基礎講座 2018 Team 17
        </div>
      </div>
    </footer>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  </body>
</html>
